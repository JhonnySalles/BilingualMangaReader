# BilingualMangaReader
> Leitor de mangas offline, no qual possui compatibilidade com Tesseract e Google Vision para utilizaÃ§Ã£o de OCR, vÃ­nculo de dois arquivos em idiomas diferentes com facilidade na troca entre as pÃ¡ginas de ambos e compatibilidade com textos extraido e processado atravÃ©s do programa [MangaExtractor](https://github.com/JhonnySalles/MangaExtractor)

<h4 align="center"> 
	ğŸš§  BilingualMangaReader ğŸš€ Em construÃ§Ã£o...  ğŸš§
</h4>

[![Build Status][travis-image]][travis-url]

<p align="center">
 <a href="#Sobre">Sobre</a> â€¢
 <a href="#Bibliotecas-utilizadas">Bibliotecas utilizadas</a> â€¢ 
 <a href="#Json-processado">Json processado</a> â€¢ 
 <a href="#Estrutura-da-classe-do-arquivo-de-legenda">Estrutura do arquivo de legenda</a> â€¢ 
 <a href="#HistÃ³rico-de-Release">HistÃ³rico de Release</a> â€¢ 
 <a href="#Features">Features</a> â€¢ 
 <a href="#Contribuindo">Contribuindo</a> â€¢ 
 <a href="#InstalaÃ§Ã£o">InstalaÃ§Ã£o</a> â€¢ 
 <a href="#Exemplos">Exemplos</a>
</p>


## Sobre

Programa foi criado em Kotlin, onde foi utilizado algumas bibliotecas que estarÃ£o listadas mais abaixo para carregamento das imagens e leitura de arquivos jsons.

O aplicativo foi projetado para reconhecer arquivos cbr/rar e cbz/zip em uma pasta de biblioteca, onde irÃ¡ listar todas os arquivos encontrados na pasta informada.

TambÃ©m irÃ¡ salvar algumas preferÃªncias e o progresso e tem suporte a furigana e nivel jlpt do kanji em cores.

Possui compatibilidade com o Tesseract e Google Vision para reconhecimento de caracteres em imagens, no qual comparado a versÃ£o de computador e em teste realizado Ã© bem limitado, o que apenas faz jus o reconhecimento para kanjis e nÃ£o palavras inteiras.

Vinculo entre dois arquivos diferentes para realizar a troca de pÃ¡gina entre os arquivos de forma fÃ¡cil com apenas um clique de botÃ£o, no qual pode auxiliar na leitura e aprendizado de um novo idioma.


### Bibliotecas utilizadas

<ul>
  <li><a href="https://github.com/square/picasso">Picasso</a> - Uma poderosa biblioteca de download e cache de imagens para Android.</li>
  <li><a href="https://github.com/google/gson">Gson</a> - Uma biblioteca para conversÃ£o de json em classe. </li>
  <li><a href="https://github.com/WorksApplications/Sudachi">Sudachi</a> - Uma excelente api para reconhecimento de vocabulÃ¡rio dentro de uma frase em japonÃªs, como tambÃ©m sua leitura, forma de dicionÃ¡rio e afins. </li>
  <li> Room - Uma biblioteca nativa com vÃ¡rios recusos para gerenciar banco de dados SQLite. </li>
  <li> PageView - Implementado a estrutura de apresentaÃ§Ã£o de imagens em carrocel. </li>
  <li><a href="https://github.com/junrar/junrar">Junrar</a> - Biblioteca para leitura e extraÃ§Ã£o de arquivos rar e cbr. </li>
  <li><a href="https://github.com/0xbad1d3a5/Kaku]">Kaku</a> - Leitor OCR para android. <i>"Apenas chamada por dentro aplicativo, necessÃ¡rio estar instalado."</i> </li>
  <li><a href="https://www.atilika.org/">Kuromoji</a> - Analizador morfolÃ³gico japonÃªs. </li>
  <li><a href="https://github.com/WorksApplications/Sudachi">Sudachi</a> - Sudachi Ã© um analisador morfolÃ³gico japonÃªs.</li>
  <li><a href="https://github.com/lofe90/FuriganaTextView">FuriganaTextView</a> - TextView personalizado para Android que renderiza texto em japonÃªs com furigana. </li>
  <li><a href="https://github.com/adaptech-cz/Tesseract4Android">Tesseract4Android</a> - Poderosa biblioteca que faz a comunicaÃ§Ã£o com o Tesseract OCR.</li>
  <li><a href="https://github.com/tony19/logback-android">LogBack</a> - Biblioteca que traz o poderoso logback para o android.</li>
  <li><a href="https://github.com/sarajmunjal/two-way-backport">TwoWayView</a> - Biblioteca para apresentaÃ§Ã£o de lista, grids e afins com formato horizontal e vertical.</li>
  <li>Retrofit 2 - Popular biblioteca para HTTPs no Android.</li>
</ul>


## Json processado

Caso tenha alguma dÃºvida sobre como processar o json favor entrar em contato. Em breve estarei disponibilizando as legendas que jÃ¡ processadas.

[Legendas do manga de exemplo.](https://drive.google.com/drive/folders/1RGVVoyrLfT6qZO9mYChkmWPc1Gm0s3YJ?usp=sharing)

### Estrutura da classe do arquivo de legenda

O aplicativo Ã© tambÃ©m compatÃ­vel com legendas extraidas e prÃ© processadas com o programa [MangaExtractor](https://github.com/JhonnySalles/MangaExtractor), onde apÃ³s exportar para json as legendas com o formato abaixo, Ã© possÃ­vel carrega-los tanto embutido no arquivo de manga (rar/zip/tar), como tambÃ©m importado um arquivo de json solto localizado em alguma pasta no celular.

    List<Class> capitulos          # Lista de classes de capitulos
    â”œâ”€â”€ id
    â”œâ”€â”€ manga                  # Nome do manga
    â”œâ”€â”€ volume              
    â”œâ”€â”€ capitulo
    â”œâ”€â”€ linguagem              # Atualmente Ã© suportado em linguagem InglÃªs, JaponÃªs e PortuguÃªs.
    â”œâ”€â”€ scan
    â”œâ”€â”€ isExtra
    â”œâ”€â”€ isRaw
    â”œâ”€â”€ isProcessado
    â”œâ”€â”€ List<Class> paginas    # Array de classes pÃ¡ginas
    â”‚   â”œâ”€â”€ nome               # Nome da imagem que estÃ¡ sendo processado
    â”‚   â”œâ”€â”€ numero             # Um contador sequencial das imagens que estÃ£o no diretÃ³rio
    â”‚   â”œâ”€â”€ hashPagina
    â”‚   â”œâ”€â”€ isProcessado
    â”‚   â”œâ”€â”€ List<Class> Textos # Array de classe dos textos da pÃ¡gina
    â”‚   â”‚   â”œâ”€â”€ sequencia
    â”‚   â”‚   â”œâ”€â”€ posX1          # Coordenadas da fala na imagem
    â”‚   |   â”œâ”€â”€ posY1              
    â”‚   |   â”œâ”€â”€ posX2              
    â”‚   |   â””â”€â”€ posY2 
    |   â”œâ”€â”€ hashPagina         # Hash md5 da imagem que foi processada, para que possa localizar a legenda desta pÃ¡gina
    â”‚   â””â”€â”€ vocabulario        # VocabulÃ¡rio da pÃ¡gina
    â”‚       â”œâ”€â”€ palavra       
    â”‚       â”œâ”€â”€ portugues      # Significado da palavra em portuguÃªs
    â”‚	      â”œâ”€â”€ ingles         # Significado da palavra em inglÃªs
    â”‚	      â”œâ”€â”€ leitura        # Leitura em katakana
    â”‚       â””â”€â”€ revisado       # Flag sinalizadora que o vocabulÃ¡rio foi revisado ou nÃ£o. 
    â””â”€â”€ vocabulario            # VocabulÃ¡rio do capitulo
        â”œâ”€â”€ palavra            
        â”œâ”€â”€ portugues          # Significado da palavra em portuguÃªs
	      â”œâ”€â”€ ingles             # Significado da palavra em inglÃªs
	      â”œâ”€â”€ leitura            # Leitura em katakana
        â””â”€â”€ revisado           # Flag sinalizadora que o vocabulÃ¡rio foi revisado ou nÃ£o.
  
         
> Estrutura de classe com informaÃ§Ãµes da pÃ¡gina que possui a legenda prÃ© processada, podendo ser obtida de uma raw ou traduzida de alguma fÃ£ sub. Com ele serÃ¡ possÃ­vel apresentar a traduÃ§Ã£o ou significados dos kanjis presente na pÃ¡gina.


## HistÃ³rico de Release

* 0.1.0
    * Uso em desenvolvimento.
* 0.2.0
    * Leitor de manga com suporte a rar/zip/cbr/cbz.
    * Recursos principais de um leitor de manga.
    * Adicionar favorito.
    * ExclusÃ£o do arquivo.
    * Ajuste de brilho e cor da imagem.
    * Reconhecimento de fugirana nos textos em japonÃªs.
    * Carregar legendas externas e interna ao arquivo.
    * Detalhes sobre o kanji e nivel jlpt.
    * Primeira versÃ£o estÃ¡vel publicada. 
* 0.2.1
    * LocalizaÃ§Ã£o do texto com clique longo no balÃ£o de fala.
    * Adicionado tela de ajuda com detalhes do funcionamento.
    * Adicionado controle de luz azul e sÃ©pia.
* 0.2.2
    * Ajustes de bugs e erros.
    * Novo calculo de posicionamento para a aplicaÃ§Ã£o da legenda 
* 0.2.7
    * Adicionado mÃ©todo para vincular pÃ¡ginas de dois arquivos diferentes.
    * Adicionado mÃ©todo de arrasta e solta para a organizaÃ§Ã£o das imagens.
    * Adicionado mÃ©todo para vincular pÃ¡ginas duplas quando necessÃ¡rio no arquivo vinculado.
    * Implementado a correÃ§Ãµes de alguns bugs.
    * CorreÃ§Ã£o para a leitura aproveitar a tela inteira em android recente.
    * Ajuste na busca da legenda e a implementaÃ§Ã£o da busca pela pÃ¡gina vinculada.
* 0.2.8
    * Implementado mÃ©todos para rastrear possiveis erros.
    * Ajuste de erros e bug.
    * Refatorado alguns icones.
    * Implementado a chamada ao App Kaku.
* 0.2.9
    * OtimizaÃ§Ã£o para o aplicativo utilizar menos memÃ³ria.
    * OtimizaÃ§Ã£o no carregamento das capas.
    * Implementado a utilizaÃ§Ã£o da biblioteca LruCache para as imagens.
    * ImplementaÃ§Ã£o de novas funcionalidades de ordenaÃ§Ã£o na tela de vinculo de arquivo.
* 0.2.10
    * Implementado nova funcionalidade de OCR, utilizando-se da tecnologia do Tesseract e Google Vision.
    * Adicionado nova funcionalidade e painel flutuante que irÃ¡ recortar um pedaÃ§o da imagem para ser feito o reconhecimento de caractere no Tesseract.
    * Adicionado novo layout na janela flutuante para receber as informaÃ§Ãµes do texto reconhecido, como tambÃ©m irÃ¡ manter uma lista do que foi capturado em tempo de execuÃ§Ã£o.
    * Adicionado para o Tesseract os data de treinamento nos idiomas ProtuguÃªs, InglÃªs e JaponÃªs.
    * Implementado a possibilidade de ajustar a janela flutuante.
* 0.2.11
    * OtimizaÃ§Ã£o na biblioteca, tanto no carregamento dos itens quando na funcionalidade.
    * Refeito o layout para melhor aparÃªncia.
    * Adicionado nova tela com informaÃ§Ãµes adicionais sobre o arquivo, com informaÃ§Ãµes de capÃ­tulos e outros arquivos vinculados.
    * Adicionado animaÃ§Ãµes nas transiÃ§Ãµes de tela e nos arquivos da biblioteca.
    * Implementado um novo painel flutuante com botÃµes essenciais para leitura, nÃ£o sendo necessÃ¡rio sair da tela cheia para executar algum comando.
* 0.2.14
    * Refatorado alguns nomes de icones.
    * Ajuste de layout.
    * CorreÃ§Ã£o em bug no scrool automÃ¡tico.
    * Ajuste de cores do projeto.
    * Implementado backup do banco de dados.
* 0.2.15
    * Ajuste na ordenaÃ§Ã£o de pÃ¡ginas.
    * Criado tela para verificaÃ§Ã£o do vocabulÃ¡rio.
* 0.2.16
    * Impelemntado novo tema de detalhe sobre o kanji.
    * Adicionado banco de dados do kanji.
    * Ajuste de layout.
    * Implemetado temas no aplicativo.
* 0.2.17
    * Implementado zoom na imagem com o toque longo.
    * Ajustes nas cores e layouts.
    * Adicionado funcionalidade copiar o vocabulÃ¡rio no toque longo.
    * Implementado para desfazer atÃ© 10 ultimas alteraÃ§Ãµes na tela de vÃ­nculo de arquivos.
    * CorreÃ§Ã£o de bug na ordenaÃ§Ã£o das pÃ¡ginas na tela de vinculo de arquivos.
    * Implementado para o aplicativo realizar a abertura de qualquer arquivo cbr ou zip diretamente.
    * Adicionado atalhos para ultimos arquivos abertos.
* 0.2.18
    * Implementado popup na tela de vÃ­nculo de arquivos para visualizar a imagem em maior tamanho.
    * Otimizado o carregamento das imagens na tela de vinculo de arquivos.
    * Implementado funÃ§Ã£o de zoom de pinÃ§a no popup de imagem.
    * CorreÃ§Ã£o no vocabulÃ¡rio para aceitar a traduÃ§Ã£o em portuguÃªs e inglÃªs.
    * CorreÃ§Ã£o para a troca da pÃ¡gina entre os arquivos vinculado esteja mantendo a posiÃ§Ã£o da leitura.
* 0.2.19
    * Em progresso.

### Features

- [X] Abertura de arquivos cbr/rar
- [X] Abertura de arquivos cbz/zip
- [X] Abertura de arquivos Tar
- [X] Leitor com o minimo de recursos para visualizaÃ§Ã£o do manga
- [X] Listar arquivos na pasta de biblioteca
- [X] Guardar informaÃ§Ãµes sobre progresso
- [X] Carregar legendas prÃ© processadas
- [X] LocalizaÃ§Ã£o da legenda em outro idioma
- [X] Popup flutuante da legenda para facilitar a leitura
- [X] ImpressÃ£o na imagem das coordenadas de texto extraido para melhor localizar a legenda
- [X] Reconhecimento de furigana do texto em japonÃªs
- [X] Reconhecimento do nivel jlpt do kanji
- [X] Ajustes no brilho e cores da imagem
- [X] Melhorias e ajuste da interface
- [X] ImplementaÃ§Ã£o de lista de histÃ³rico
- [X] UtilizaÃ§Ã£o de vocabulÃ¡rio
- [X] Significado do kanji
- [X] Favoritar o kanji para estudo posterior
- [X] Interface para modo tablet
- [X] Localizar no vocabulÃ¡rio na ao toque na palavra
- [X] Troca das legendas entre idiomas selecionados (devido a diferenÃ§as de paginas entre versÃµes pode nÃ£o localizar de forma satisfatÃ³ria)
- [X] Luz azul para leitura norturna
- [X] Localizar a legenda pela cordenada do texto
- [X] Ajuste para a leitura aproveitar a tela inteira do celular
- [X] Adicionado nova tela para vincular as pÃ¡ginas de dois arquivos
- [X] Implementar a abertura de um segundo arquivo para leitura de multi idioma (com a troca de imagens entre o original e outro arquivo em outro idioma)
- [X] Implementar a troca de imagens na leitura para a pÃ¡gina vinculada
- [X] Implementar a re-organizaÃ§Ã£o de outras pÃ¡ginas ao movimentar uma pÃ¡gina em especÃ­fica
- [X] Adicionar funcionalidade para pÃ¡ginas duplas
- [X] Ajustar a busca das legendas para utilizar da pÃ¡gina vinculada
- [X] Implementar a organizaÃ§Ã£o dos arquivos vinculados por idioma, sendo possÃ­vel o vinculo de mais de um arquivo e manter a organizaÃ§Ã£o feita
- [X] Implementar rastreamento de erros e logs.
- [X] Adicionado a chamada ao aplicativo Kaku
- [X] Implementar novas funcionalidades de ordenaÃ§Ã£o na tela de vinculo de arquivo.
- [X] Implementar ordenaÃ§Ã£o de pÃ¡ginas simples e dupla.
- [X] Implementar ordenaÃ§Ã£o de pÃ¡ginas automÃ¡tica, utilizando o tamanho da imagem para identificar se Ã© pÃ¡gina dupla.
- [X] Implementar exclusÃ£o do vinculo do arquivo.
- [X] Ajustar o carregamento das imagens de capa, realizar otimizaÃ§Ã£o no aplicativo e menor consumo de memÃ³ria.
- [X] Implementar o Tesseract OCR ao projeto e realizar identificaÃ§Ã£o de palavras em imagens.
- [X] Ajustar o painel flutuante para receber palavras que foram reconhecidas pelo Tesseract.
- [X] Implementar a api Google Vision para reconhecimento de palavras em imagens.
- [X] Favoritar vocabulÃ¡rio para estudo posterior
- [X] Implementar temas no aplicativo.
- [X] AdiÃ§Ã£o de dicionarios japonÃªs.
- [X] AdiÃ§Ã£o de vÃ¡rias pastas de biblioteca.
- [X] Implementar zoom nas imagens na tela de vinculo de arquivo.
- [X] Implementar novas ordenaÃ§Ãµes na tela de vinculo de arquivo.
- [X] Abertura de arquivos diretamente pelo aplicativo.
- [X] Adicionado atalho para ultimos arquivos lidos.
- [ ] Implementar nova funcionalidade para leituras de novel.
- [ ] Implementar abertura de arquivos pdf.
- [ ] Implementar abertura de arquivos ebook.
- [ ] Implementar abertura de pÃ¡ginas da web.
- [ ] Exportar vocabularios ao Anki


## Contribuindo

1. Fork (<https://github.com/JhonnySalles/BilingualMangaReader/fork>)
2. Crie sua branch de recurso (`git checkout -b feature/fooBar`)
3. FaÃ§a o commit com suas alteraÃ§Ãµes (`git commit -am 'Add some fooBar'`)
4. Realize o push de sua branch (`git push origin feature/fooBar`)
5. Crie um novo Pull Request

<!-- Markdown link & img dfn's -->

[travis-image]: https://img.shields.io/travis/dbader/node-datadog-metrics/master.svg?style=flat-square
[travis-url]: https://travis-ci.org/dbader/node-datadog-metrics
[wiki]: https://github.com/yourname/BilingualMangaReader/wiki

## InstalaÃ§Ã£o

> Para executar o projeto Ã© necessÃ¡rio ter o android studio instalado junto com uma versÃ£o do emulador.

> Abra entÃ£o no android studio a pasta do projeto e aguarde o gradle processar as dependÃªncias 

> ApÃ³s a instalaÃ§Ã£o das dependÃªncias compile e execute o projeto, no qual serÃ¡ entÃ£o aberto no emulador.


## Exemplos

> Algumas imagens do aplicativo

![Biblioteca](https://i.imgur.com/roLmu9C.png)

![Leitor](https://i.imgur.com/r4hhAzj.jpg)

![Leitor](https://i.imgur.com/Awwcjyc.jpg)


> Recursos

![Vinculo de paginas em dois arquivos](https://i.imgur.com/uCvYPV6.png)

![Paginas nÃ£o vinculadas](https://i.imgur.com/E1kyoQ4.png)

![Paginas duplas](https://i.imgur.com/adp9MwE.png)

![Popup flutuante](https://i.imgur.com/dIuQO9N.jpg)

![LocalizaÃ§Ã£o do texto reconhecido com ocr](https://i.imgur.com/fMavbfI.jpg)

![InformaÃ§Ãµes da legenda](https://i.imgur.com/t7LR4PV.jpg)

![InformaÃ§Ãµes do kanji](https://i.imgur.com/j0Wzpsv.jpg)

![InformaÃ§Ãµes do kanji](https://i.imgur.com/js2wlIb.jpg)

![VocabulÃ¡rio](https://i.imgur.com/xG1jfYr.jpg)


> Estrutura do arquivo recomendada

![Estrutura de pasta](https://i.imgur.com/EZdlHGV.png)

> Recomendo embutir a legenda no arquivo e separar as pastas por capitulo para facilitar a localizaÃ§Ã£o da legenda correta quando nÃ£o for possÃ­vel o aplicativo encontrar a pagina correspondente.